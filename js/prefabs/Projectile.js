var RPG=RPG||{};RPG.Projectile=function(t,e,i,s){Phaser.Sprite.call(this,t.game,e,i,s),this.harmful=!0,this.state=t,this.game=t.game,this.game.physics.arcade.enable(this),this.anchor.setTo(.5),this.checkWorldBounds=!0,this.outOfBoundsKill=!0,"bullet"===s?(this.data.dmg=1,this.data.speed=200):"boss_klein_blast"===s&&(this.data.dmg=1,this.data.speed=300,this.enableBody=!0,this.body.setSize=[20,25,10,10],this.animations.add("fire",[0,1,2],12,!0),this.animations.add("explode",[3,4,5,6,7],12,!1),this.animations.play("fire"),this.crystalTimer,this.setCrystal())},RPG.Projectile.prototype=Object.create(Phaser.Sprite.prototype),RPG.Projectile.prototype.constructor=RPG.Projectile,RPG.Projectile.prototype.update=function(){(this.x>=this.game.world.width||this.x<0||this.y>=this.game.world.height||this.y<0)&&this.kill()},RPG.Projectile.prototype.turnToCrystal=function(){var t=RPG.GameState.enemies.getFirstExists(!1);if(t)t.reset(this.x,this.y);else{var t=new RPG.Enemy(RPG.GameState,this.x,this.y,RPG.crystal);RPG.GameState.enemies.add(t)}RPG.game.sound.play("freeze"),t.animations.play("create");var e=this.animations.play("explode");this.harmful=!1,e.onComplete.add(function(){this.kill()},this)},RPG.Projectile.prototype.setCrystal=function(){if(Rnd.bit(.6)){var t=this;this.crystalTimer=setTimeout(function(){t.turnToCrystal()},Rnd.integer(800,1e3))}};